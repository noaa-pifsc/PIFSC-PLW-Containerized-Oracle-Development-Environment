# PIFSC Oracle Developer Environment Presentation

## Overview
This project was created to provide a containerized Oracle developer environment (ODE) for PIFSC software developers so they can develop databases and APEX applications locally and deploy them to the enterprise test and production server instances.  This flexible collection of containers can be customized to include database and APEX application dependencies for systems that are deployed to the test and production instances to help ensure that the software will work as intended when it is deployed to the enterprise server instances.  

## Outline
-   Base image:
    -   Build and run the trivial case using the dev configuration
        -   Remove all containers, images, and volumes first
        -   Show that the database and APEX server are available (when we first build the DB and install APEX it takes a while)
        -   Pull down the containers (docker compose down)
        -   Build and run the trivial case using the dev configuration (show that the process takes a lot less time when the data volume exists and APEX is already installed in the database container)
    -   Show project README.md
    -   Show file system
        -   docker folder contains the files used to build the images and run the containers
        -   automated_deployments folder contains automated bash scripts
            -   project_config.sh - defines variables that are used to prepare and build the images and run the containers, these specify the directory location for the prepared directory  
            -   prepare_docker_project.sh - to prepare a directory with files from the different data system repositories that will be used to build a custom SQLPlus image that is used to deploy the data systems.  It clones the corresponding repositories and copies the necessary files to the docker/src folder that is used to build the image  
            -   build_deploy_project.sh (dev and test options exist for different scenarios), they each use their own docker-compose.yml files based on the scenario.  These scripts build the images and run the containers
    -   Show the main files (docker folder)
        -   dev and test.yml files
            -   auto-xe-reg - Utilizes the official Oracle database express (XE) and ORDS-Developer images from the Oracle container registry
             -   auto-ords-reg - Configured for the ORDS/APEX container to start after the XE database is up and running (service-healthy)
            -   auto-db-app-deploy - custom SQLPlus image that is used to deploy the database schemas and APEX workspaces, and APEX applications to the express database.  This container starts after the XE database is up and running (service-healthy)
            -   docker volumes are created for the development scenario so the schemas and APEX objects are retained across restarts of the containers so developers can pick up where they left off.  The test scenario has no docker volumes explicitly created since this scenario is intended to deploy everything to a blank database server  
        -   Dockerfile.deploy is used to build the custom SQLPlus image with data system files that are copied from the docker/src folder
        -   conn_string.txt is used to define the connection string including credentials for the APEX container that are used to connect to the express database container
        -   src/run_db_app_deployment.sh - this is the bash script that will automaticaly run when the database and/or APEX server are available
            -   The script specifies variables to store database connection details and evaluate them when executing the individual DB/app deployment SQLPlus scripts
            -   It defines a check_database_initialized() function to specify a schema ([SCHEMA_NAME] - e.g. DSC) that will exist if the database has been provisioned previously
            -   The bash script executes the SQLPlus scripts in a specific order to respect dependencies to deploy schemas, APEX workspaces, and APEX apps that were copied to the /src directory when the [prepare_docker_project.sh](../deployment_scripts/prepare_docker_project.sh) script is executed.
                -   If the project has already initialized the database then it will not run the automated SQLPlus deployment scripts
    -   Show README documentation
        -   This project is intended to be forked so it can be quickly customized for specific data systems.  SOP provided for how to customize the project
        -   This project is also intended to have its child repos forked as well.  For instance the base repository was forked to implement the DSC schema which is used in many different data systems (performs authentication and other standardized procedures/functions are provided).  The DSC fork was then forked again for the Centralized Authorization System since it depends on the DSC schema.  This way when improvements are made to the parent repository they can be pulled into the forked repositories.  Also, it makes it easier to build off of a container that already handles the dependencies of the given project
    -   Next, look at the DSC repo
        -   This was forked from the parent repo
        -   Simple schema with no dependencies
        -   Only have to change a few files to customize it for the new Oracle data system
            -   project_config.sh needs to be updated to specify the ODE git url and the root/project directory paths.  It is also updated to specify any additional external repositories that are used when building the custom SQLPlus image
            -   Preparation script was updated (this is an important script)
                -   Updated the script to use the git URLs to retrieve the external repository files and copy them to the appropriate folders within the docker/src folder
                -   The code to wait until APEX is installed was commented out since there are no APEX workspaces/apps that need to be deployed in this scenario
            -   run_db_app_deployment.sh was updated (this is an important script)
                -   Updated to run the additional SQLplus scripts to create the DSC schema, grant privileges, and deploy the DSC objects
        -   The rest of the files don't change much from the base image except for the documentation since it defines the dependencies and provides other important information
        -   Look at the README.md
            -   (Resources Section) It specifies the git repositories used in the DSC ODE project
             -   (Automated Preparation Process) It specifies the files that were copied into the docker/src folder of the prepared directory
            -   (Automated Deployment Process) It specifies the SQLPlus scripts that are executed when the custom SQLPlus container is run
            -   The rest of the sections are largely the same as the parent repository
    -   Next, look at the CAS repo
        -   This was forked from the DSC repo
        -   DB schema, APEX app with a dependency on DSC
        -   Only have to change a few files to customize it for the new Oracle data system
            -   project_config.sh was updated with the project directory path and URLs for the CAS repo and the CAS ODE project
            -   Preparation script was updated (this is an important script)
                -   Updated the script to use the git URLs to retrieve the CAS repository files and copy them to the appropriate folders within the docker/src folder
                -   The code to wait until APEX is installed was uncommented since the CAS data system has an APEX app
            -   run_db_app_deployment.sh was updated (this is an important script)
                -   Updated to run the additional SQLplus scripts to create the CAS schema, grant privileges, and deploy the CAS database objects and CAS APEX app
        -   Look at the README.md
            -   (Resources Section) It specifies the git repositories used in the CAS ODE project
             -   (Automated Preparation Process) It specifies the files that were copied into the docker/src folder of the prepared directory
            -   (Automated Deployment Process) It specifies the SQLPlus scripts that are executed when the custom SQLPlus container is run
            -   The rest of the sections are largely the same as the parent repository
